<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Workout Planner · Bogar Style</title>
  <meta name="description" content="Interactive weekly workout planner with set tracking, videos/GIFs, and progress saved to your browser. Dribbble Bogar-inspired UI.">
  <style>
    :root{ --bg:#0a0b10;--panel:rgba(22,24,33,.6);--muted:#a8b0c2;--text:#f4f6fb;--pri:#8b5cf6;--pri2:#ec4899;--acc:#22d3ee;--card:rgba(17,20,29,.7);--chip:rgba(255,255,255,.06);--ring:rgba(139,92,246,.35);--shadow:0 20px 50px rgba(2,6,23,.45) }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:radial-gradient(1200px 600px at 20% -10%, rgba(139,92,246,.25), transparent 60%), radial-gradient(1200px 600px at 110% 10%, rgba(236,72,153,.18), transparent 60%), linear-gradient(180deg,#0a0b10,#0b0d14 50%, #0a0b10);color:var(--text);font:15px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Inter, Roboto, Ubuntu, 'Helvetica Neue', Arial}
    a{color:var(--pri);text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:1040px;margin:0 auto;padding:20px}
    header{position:sticky;top:0;background:rgba(10,12,18,.6);backdrop-filter:saturate(140%) blur(12px);z-index:20;border-bottom:1px solid rgba(255,255,255,.06)}
    .head{display:flex;gap:14px;align-items:center;padding:12px 20px}
    .logo{display:flex;gap:10px;align-items:center}
    .logo i{width:36px;height:36px;border-radius:10px;background:radial-gradient(circle at 30% 30%,var(--pri),transparent 45%),radial-gradient(circle at 70% 70%,var(--acc),transparent 40%),linear-gradient(135deg,#1b2330,#0e141e);box-shadow:inset 0 0 0 1px #263042, var(--shadow)}
    h1{font-size:18px;margin:0}
    .tabs{display:flex;gap:8px;flex-wrap:wrap}
    .tab{border:1px solid transparent;background:var(--chip);color:var(--text);padding:10px 14px;border-radius:999px;cursor:pointer;transition:.2s ease}
    .tab.active{background:linear-gradient(135deg,rgba(139,92,246,.25),rgba(236,72,153,.25));border-color:rgba(139,92,246,.45);box-shadow:0 0 0 3px var(--ring)}

    main{display:grid;grid-template-columns:360px 1fr;gap:16px;align-items:start}
    @media (max-width:1000px){main{grid-template-columns:1fr}}

    .card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:22px;box-shadow:var(--shadow)}
    .card .hd{padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08);display:flex;gap:8px;align-items:center;justify-content:space-between}
    .card .bd{padding:16px}
    .muted{color:var(--muted)}

    /* Hero */
    .hero{position:relative;overflow:hidden;margin-bottom:16px}
    .hero-ink{position:absolute;inset:0;background:radial-gradient(600px 300px at 80% 0%, rgba(236,72,153,.25), transparent 60%), radial-gradient(600px 300px at -10% 80%, rgba(139,92,246,.25), transparent 60%)}
    .hero-inner{position:relative;display:flex;gap:24px;align-items:center;justify-content:space-between;padding:22px}
    .hero-title{margin:0;font-size:24px;letter-spacing:.2px}
    .hero-sub{margin:6px 0 12px;color:var(--muted)}
    .hero-chips{display:flex;gap:8px;flex-wrap:wrap}
    .hero-progress{display:flex;align-items:center;gap:14px}
    .ring{--pct:0; width:96px;height:96px;border-radius:50%;background:
      conic-gradient(#8b5cf6 calc(var(--pct)*1%), rgba(255,255,255,.14) 0),
      radial-gradient(circle 42px, rgba(14,18,28,.92) 98%, transparent 100%);
      display:grid;place-items:center;border:1px solid rgba(255,255,255,.08)}
    .ring-num{font-weight:700}
    .hero-meta{min-width:150px}

    .list{display:flex;flex-direction:column;gap:12px}
    .exercise{background:linear-gradient(180deg,rgba(24,28,39,.92),rgba(18,22,32,.98));border:1px solid rgba(255,255,255,.06);border-radius:18px;padding:14px}
    .exercise h4{margin:0 0 6px;font-size:15px}
    .ex-meta{display:flex;gap:10px;flex-wrap:wrap}
    .chip{background:var(--chip);color:#eaeefc;border:1px solid rgba(255,255,255,.08);border-radius:999px;padding:6px 10px;font-size:12px}

    .sets{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .set{min-width:48px;display:flex;align-items:center;justify-content:center;border:1px solid rgba(255,255,255,.12);border-radius:12px;height:40px;padding:0 12px;cursor:pointer;user-select:none;background:rgba(255,255,255,.04)}
    .set.done{background:linear-gradient(135deg, rgba(139,92,246,.22), rgba(236,72,153,.22));border-color:rgba(139,92,246,.45)}
    .set.done::after{content:'✓';margin-left:6px;color:white}

    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .row > *{flex:1}
    input[type="number"], input[type="text"], textarea{width:100%;background:rgba(14,18,28,.9);border:1px solid rgba(255,255,255,.08);border-radius:12px;color:var(--text);padding:12px}
    textarea{min-height:70px}

    button{background:linear-gradient(180deg,rgba(30,36,52,.7),rgba(20,26,38,.8));border:1px solid rgba(255,255,255,.08);color:#e7ecf8;padding:10px 12px;border-radius:12px;cursor:pointer}
    button:hover{filter:brightness(1.06)}
    .btn-ghost{background:transparent;border-color:rgba(255,255,255,.12)}
    .btn-pri{border-color:transparent;background:linear-gradient(135deg, #8b5cf6, #ec4899); color:white; box-shadow:0 8px 22px rgba(139,92,246,.35)}

    .stack{display:flex;flex-direction:column;gap:12px}
    .grid{display:grid;gap:12px}
    .two{grid-template-columns:1fr 1fr}
    @media (max-width:680px){.two{grid-template-columns:1fr}}

    .demo{display:flex;gap:10px;align-items:center;margin-top:8px}
    .demo img{width:112px;height:84px;border-radius:14px;object-fit:cover;border:1px solid rgba(255,255,255,.08)}

    .footer{margin-top:20px;color:var(--muted);font-size:12px}
    .notice{padding:12px;border:1px dashed rgba(255,255,255,.14);border-radius:12px;background:rgba(14,18,28,.6);margin-top:10px}
    .kbd{padding:.2em .45em;border:1px solid rgba(255,255,255,.14);border-bottom-width:2px;border-radius:6px;background:rgba(14,18,28,.6)}
  </style>
</head>
<body>
  <header>
    <div class="head wrap">
      <div class="logo"><i></i><h1>Workout Planner</h1></div>
      <div class="tabs" id="dayTabs" aria-label="Week Day Tabs"></div>
    </div>
  </header>

  <div class="wrap">
    <section class="hero card">
      <div class="hero-ink"></div>
      <div class="hero-inner">
        <div class="hero-text">
          <h2 class="hero-title">Your Weekly Plan</h2>
          <p class="hero-sub">Track sets, watch form demos, and keep notes. Stay consistent.</p>
          <div class="hero-chips">
            <span class="chip">Strength</span>
            <span class="chip">Core</span>
            <span class="chip">Cardio</span>
          </div>
        </div>
        <div class="hero-progress">
          <div class="ring" id="heroRing"><div class="ring-num" id="heroPct">0%</div></div>
          <div class="hero-meta">
            <small class="muted">Today’s completion</small>
            <div id="heroSets" class="hero-sets">0 / 0 sets</div>
          </div>
        </div>
      </div>
    </section>

    <main>
      <section class="card" id="dayPanel" aria-live="polite">
        <div class="hd"><div class="row" style="justify-content:space-between;width:100%"><strong id="dayTitle">Day</strong>
          <div class="row" style="flex:0 0 auto">
            <button class="btn-ghost" id="resetDayBtn" title="Reset completed sets for this day">Reset Day</button>
            <button class="btn-pri" id="exportBtn" title="Export your progress as JSON">Export</button>
            <button class="btn-ghost" id="importBtn" title="Import progress JSON">Import</button>
          </div>
        </div></div>
        <div class="bd">
          <div id="summary" class="stack"></div>
          <h3>Warm‑Up</h3>
          <p id="warmup" class="muted"></p>

          <h3>Exercises</h3>
          <div id="exerciseList" class="list"></div>

          <div id="finisherWrap" style="margin-top:16px">
            <h3>Finisher</h3>
            <p id="finisher" class="muted"></p>
          </div>
        </div>
      </section>

      <aside class="card">
        <div class="hd"><strong>Notes & Tools</strong></div>
        <div class="bd stack">
          <div class="grid two">
            <div>
              <label class="muted">Target session RPE (effort 1–10)</label>
              <input type="number" id="rpe" min="1" max="10" step="1" />
            </div>
            <div>
              <label class="muted">Session mood</label>
              <input type="text" id="mood" placeholder="Focused, tired, great pump…" />
            </div>
          </div>
          <div>
            <label class="muted">General notes</label>
            <textarea id="notes" placeholder="Form cues, wins, next‑time tweaks…"></textarea>
          </div>
          <div class="notice">
            <b>Tip:</b> Built‑in guide + video for each exercise; paste a GIF or YouTube link to override. Progress auto‑saves (localStorage). Press <span class="kbd">/</span> to quick‑search moves. No timers.
          </div>
          <div id="searchWrap">
            <label class="muted">Quick search</label>
            <input id="search" type="text" placeholder="Type to filter exercises… ( / to focus )" />
          </div>
        </div>
      </aside>
    </main>

    <p class="footer">Bogar‑inspired UI · GitHub Pages ready · v1.2</p>
  </div>

  <template id="exerciseTmpl">
    <div class="exercise" data-key="">
      <div class="row" style="justify-content:space-between">
        <h4 class="ex-name"></h4>
        <div class="ex-meta">
          <span class="chip ex-prescription"></span>
          <span class="chip ex-type"></span>
        </div>
      </div>
      <div class="demo">
        <img alt="Demo thumbnail" class="demo-thumb" />
        <div class="row" style="flex:1">
          <a class="btn-ghost ex-guide" target="_blank" rel="noopener">Open Guide</a>
          <a class="btn-pri ex-video" target="_blank" rel="noopener">Watch Video</a>
        </div>
      </div>
      <div class="sets"></div>
      <div class="grid two" style="margin-top:10px">
        <div>
          <label class="muted">Load (lbs per hand)</label>
          <input type="number" class="ex-load" min="0" step="1" placeholder="e.g., 25">
        </div>
        <div>
          <label class="muted">Your reps/time</label>
          <input type="text" class="ex-result" placeholder="e.g., 10/10/9 or :30/:28/:25">
        </div>
      </div>
      <div style="margin-top:10px" class="grid two">
        <div>
          <label class="muted">Custom GIF/Video URL (optional)</label>
          <input type="text" class="ex-gifurl" placeholder="Paste a GIF image URL or a YouTube link">
        </div>
      </div>
    </div>
  </template>

  <script>
  // ------ DATA ------
  const PLAN = {
    meta:{ updated:"2025-04-01", author:"You" },
    days:[
      {id:1, title:"Day 1 · Full‑Body Strength + Cardio",
       warmup:"5 min brisk walk or easy elliptical, then dynamic stretches (arm circles, hip swings, leg swings).",
       finisher:"5 min moderate cardio (incline walk or easy elliptical).",
       items:[
         {name:"Dumbbell Bench Press", sets:3, reps:"10", type:"strength"},
         {name:"Goblet Squat (Dumbbell Squat)", sets:3, reps:"10", type:"strength"},
         {name:"One‑Arm Dumbbell Row", sets:3, reps:"10 each arm", type:"strength"},
         {name:"Dumbbell Shoulder Press", sets:3, reps:"10", type:"strength"},
         {name:"Plank", sets:3, reps:"20–30 sec", type:"time"}
       ]},
      {id:2, title:"Day 2 · Cardio & Core (Active Recovery)",
       warmup:"3–5 min easy pace to get blood flowing.",
       finisher:"Optional: 5 min light cardio or full‑body stretch.",
       items:[
         {name:"Cardio (Treadmill/Elliptical)", sets:1, reps:"20 min", type:"time"},
         {name:"Bird‑Dog", sets:3, reps:"10/side", type:"core"},
         {name:"Dead Bug", sets:3, reps:"10/side", type:"core"},
         {name:"Glute Bridge", sets:3, reps:"15", type:"core"}
       ]},
      {id:3, title:"Day 3 · Upper Body (Back & Biceps)",
       warmup:"5 min cardio + arm circles, shoulder stretches.",
       finisher:"Elliptical intervals: 5 min (30s fast / 30s easy).",
       items:[
         {name:"Dumbbell Pullover", sets:3, reps:"10", type:"strength"},
         {name:"One‑Arm Dumbbell Row", sets:3, reps:"10 each arm", type:"strength"},
         {name:"Dumbbell Rear Delt Fly", sets:3, reps:"12", type:"strength"},
         {name:"Dumbbell Bicep Curl", sets:3, reps:"12", type:"strength"}
       ]},
      {id:4, title:"Day 4 · Lower Body & Core",
       warmup:"5 min brisk walk (or light jog) + leg swings, hip circles.",
       finisher:"Side plank 20s/side or standard plank; light stretching.",
       items:[
         {name:"Dumbbell Goblet Squat", sets:3, reps:"10", type:"strength"},
         {name:"Dumbbell Romanian Deadlift (RDL)", sets:3, reps:"10", type:"strength"},
         {name:"Optional: Dumbbell Reverse Lunge", sets:3, reps:"8 each leg", type:"strength"},
         {name:"Calf Raises", sets:3, reps:"15", type:"strength"},
         {name:"Russian Twist", sets:3, reps:"12 each side", type:"core"}
       ]},
      {id:5, title:"Day 5 · Full‑Body Conditioning Circuit",
       warmup:"5 min cardio + dynamic stretches.",
       finisher:"Cool down 5–10 min walk, then stretch all major groups.",
       items:[
         {name:"Incline Dumbbell Bench Press", sets:3, reps:"10", type:"circuit"},
         {name:"Dumbbell Step‑Up", sets:3, reps:"8 each leg", type:"circuit"},
         {name:"Dumbbell Thruster", sets:3, reps:"10", type:"circuit"},
         {name:"Dumbbell Woodchop", sets:3, reps:"10 each side", type:"circuit"}
       ]},
      {id:6, title:"Day 6 · Rest", warmup:"—", finisher:"Light stretch or walk.", items:[]},
      {id:7, title:"Day 7 · Active Recovery", warmup:"Light activity like walking or yoga.", finisher:"—", items:[]}
    ]
  };

  // Built-in demo links (guide + video) by exercise name
  const DEMOS = {
    "Dumbbell Bench Press": {guide:"https://musclewiki.com/exercise/dumbbell-bench-press", video:"https://www.youtube.com/watch?v=VmB1G1K7v94"},
    "Goblet Squat (Dumbbell Squat)": {guide:"https://musclewiki.com/exercise/dumbbell-goblet-squat", video:"https://www.youtube.com/watch?v=yGswPtbSlro"},
    "One‑Arm Dumbbell Row": {guide:"https://musclewiki.com/exercise/dumbbell-single-arm-row", video:"https://www.youtube.com/results?search_query=one+arm+dumbbell+row+proper+form"},
    "Dumbbell Shoulder Press": {guide:"https://musclewiki.com/exercise/dumbbell-overhead-press", video:"https://www.youtube.com/results?search_query=dumbbell+shoulder+press+proper+form"},
    "Plank": {guide:"https://commons.wikimedia.org/wiki/File:Plank_exercise.svg", video:"https://www.youtube.com/watch?v=pSHjTRCQxIw"},
    "Cardio (Treadmill/Elliptical)": {guide:"https://www.youtube.com/results?search_query=elliptical+workout+tips", video:"https://www.youtube.com/results?search_query=treadmill+incline+walk+workout"},
    "Bird‑Dog": {guide:"https://www.youtube.com/results?search_query=bird+dog+exercise+form", video:"https://www.youtube.com/watch?v=-LRjkbEy-qU"},
    "Dead Bug": {guide:"https://www.youtube.com/results?search_query=dead+bug+exercise+form", video:"https://www.youtube.com/results?search_query=dead+bug+exercise+proper+form"},
    "Glute Bridge": {guide:"https://www.youtube.com/results?search_query=glute+bridge+exercise+form", video:"https://www.youtube.com/results?search_query=glute+bridge+proper+form"},
    "Dumbbell Pullover": {guide:"https://www.youtube.com/results?search_query=dumbbell+pullover+proper+form", video:"https://www.youtube.com/results?search_query=dumbbell+pullover+how+to"},
    "Dumbbell Rear Delt Fly": {guide:"https://www.youtube.com/results?search_query=dumbbell+rear+delt+fly+proper+form", video:"https://www.youtube.com/results?search_query=rear+delt+fly+dumbbells+form"},
    "Dumbbell Bicep Curl": {guide:"https://www.youtube.com/results?search_query=dumbbell+bicep+curl+proper+form", video:"https://www.youtube.com/results?search_query=dumbbell+bicep+curl+how+to"},
    "Dumbbell Goblet Squat": {guide:"https://musclewiki.com/exercise/dumbbell-goblet-squat", video:"https://www.youtube.com/watch?v=yGswPtbSlro"},
    "Dumbbell Romanian Deadlift (RDL)": {guide:"https://www.youtube.com/results?search_query=dumbbell+romanian+deadlift+proper+form", video:"https://www.youtube.com/results?search_query=rdl+dumbbells+form"},
    "Optional: Dumbbell Reverse Lunge": {guide:"https://www.youtube.com/results?search_query=dumbbell+reverse+lunge+proper+form", video:"https://www.youtube.com/results?search_query=reverse+lunge+dumbbells+form"},
    "Calf Raises": {guide:"https://www.youtube.com/results?search_query=standing+calf+raise+dumbbells+form", video:"https://www.youtube.com/results?search_query=calf+raise+with+dumbbells+how+to"},
    "Russian Twist": {guide:"https://www.youtube.com/results?search_query=russian+twist+proper+form", video:"https://www.youtube.com/results?search_query=russian+twist+how+to"},
    "Incline Dumbbell Bench Press": {guide:"https://musclewiki.com/exercise/dumbbell-incline-bench-press", video:"https://www.youtube.com/results?search_query=dumbbell+incline+bench+press+proper+form"},
    "Dumbbell Step‑Up": {guide:"https://www.youtube.com/results?search_query=dumbbell+step+up+proper+form", video:"https://www.youtube.com/results?search_query=dumbbell+step+up+how+to"},
    "Dumbbell Thruster": {guide:"https://www.youtube.com/results?search_query=dumbbell+thruster+proper+form", video:"https://www.youtube.com/results?search_query=dumbbell+thruster+how+to"},
    "Dumbbell Woodchop": {guide:"https://www.youtube.com/results?search_query=dumbbell+woodchop+proper+form", video:"https://www.youtube.com/results?search_query=dumbbell+woodchop+how+to"}
  };

  // ------ STORAGE ------
  function setHero(pctText, done, total){
    const ring = document.getElementById('heroRing');
    const pct = Number(pctText.replace('%',''))||0;
    ring.style.setProperty('--pct', pct);
    document.getElementById('heroPct').textContent = pctText;
    document.getElementById('heroSets').textContent = `${done} / ${total} sets`;
  }
  const KEY = 'workout-progress-v1-2';
  const loadState = ()=>{ try{ return JSON.parse(localStorage.getItem(KEY)) || { days:{} } } catch{ return {days:{}} } };
  const saveState = (s)=>{ localStorage.setItem(KEY, JSON.stringify(s)) };
  let STATE = loadState();

  // ------ UTIL ------
  const el = (sel, root=document)=>root.querySelector(sel);
  const els = (sel, root=document)=>[...root.querySelectorAll(sel)];

  // ------ UI INIT ------
  const tabs = el('#dayTabs');
  PLAN.days.forEach((d, i)=>{
    const b = document.createElement('button');
    b.className='tab'; b.textContent = `Day ${d.id}`; b.title=d.title; b.addEventListener('click',()=>selectDay(i));
    tabs.appendChild(b);
  });

  let currentIndex = 0;
  function selectDay(i){ currentIndex = i; els('.tab', tabs).forEach((t,idx)=>t.classList.toggle('active', idx===i)); renderDay(PLAN.days[i]); }
  function ensureDayState(dayId){ STATE.days[dayId] = STATE.days[dayId] || { setsDone:{}, loads:{}, results:{}, gif:{}, rpe:null, mood:'', notes:'' }; return STATE.days[dayId] }

  function renderDay(day){
    const dayState = ensureDayState(day.id);
    el('#dayTitle').textContent = day.title;
    el('#warmup').textContent = day.warmup;
    el('#finisher').textContent = day.finisher;

    const sum = el('#summary'); sum.innerHTML = '';
    sum.insertAdjacentHTML('beforeend', `<div class="chip">Exercises: <b>${day.items.length}</b></div>`);
    const doneCount = Object.values(dayState.setsDone).reduce((a,arr)=>a+(arr?.filter(Boolean).length||0),0);
    const totalSets = day.items.reduce((a,it)=>a+it.sets,0);
    sum.insertAdjacentHTML('beforeend', `<div class="chip">Sets done: <b>${doneCount}/${totalSets}</b></div>`);
    const pct = totalSets? Math.round(doneCount/totalSets*100):0; setHero(pct+"%", doneCount, totalSets);

    el('#rpe').value = dayState.rpe ?? '';
    el('#mood').value = dayState.mood ?? '';
    el('#notes').value = dayState.notes ?? '';

    const list = el('#exerciseList'); list.innerHTML = '';
    day.items.forEach((it, idx)=>{
      const tpl = el('#exerciseTmpl').content.cloneNode(true);
      const card = tpl.querySelector('.exercise'); card.dataset.key = idx;
      tpl.querySelector('.ex-name').textContent = it.name;
      tpl.querySelector('.ex-prescription').textContent = `${it.sets} × ${it.reps}`;
      tpl.querySelector('.ex-type').textContent = it.type;

      const setsWrap = tpl.querySelector('.sets');
      const st = dayState.setsDone[idx] = dayState.setsDone[idx] || Array(it.sets).fill(false);
      for(let s=0; s<it.sets; s++){
        const b = document.createElement('button'); b.className = 'set' + (st[s] ? ' done' : ''); b.textContent = `Set ${s+1}`;
        b.addEventListener('click',()=>{ st[s] = !st[s]; b.classList.toggle('done', st[s]); saveState(STATE); updateSummary(day) });
        setsWrap.appendChild(b)
      }

      const loadInput = tpl.querySelector('.ex-load'); loadInput.value = dayState.loads[idx] ?? '';
      loadInput.addEventListener('change', ()=>{ dayState.loads[idx] = Number(loadInput.value)||''; saveState(STATE) })
      const resInput = tpl.querySelector('.ex-result'); resInput.value = dayState.results[idx] ?? '';
      resInput.addEventListener('change', ()=>{ dayState.results[idx] = resInput.value; saveState(STATE) })

      // Demo links / thumbnails
      const guideA = tpl.querySelector('.ex-guide');
      const videoA = tpl.querySelector('.ex-video');
      const thumb = tpl.querySelector('.demo-thumb');
      const custom = dayState.gif[idx] ?? '';
      const d = DEMOS[it.name] || {};
      function ytId(u){ try{ const url=new URL(u); if(url.hostname==='youtu.be') return url.pathname.slice(1); return url.searchParams.get('v') }catch{ return '' } }
      function applyDemo(url){
        if(url){
          if(/youtube\.com|youtu\.be/.test(url)){
            const id = ytId(url); if(id){ thumb.src=`https://i.ytimg.com/vi/${id}/hqdefault.jpg`; }
            videoA.href=url; guideA.href=d.guide||url; return;
          }
          thumb.src=url; guideA.href=url; videoA.href=d.video||'#'; return;
        }
        guideA.href = d.guide || '#';
        videoA.href = d.video || '#';
        if(d.video){ const id = ytId(d.video); if(id){ thumb.src=`https://i.ytimg.com/vi/${id}/hqdefault.jpg`; } }
      }
      applyDemo(custom);

      const gifInput = tpl.querySelector('.ex-gifurl');
      gifInput.value = custom;
      gifInput.addEventListener('change', ()=>{ dayState.gif[idx] = gifInput.value; applyDemo(gifInput.value); saveState(STATE) })

      list.appendChild(tpl)
    })

    updateSummary(day)
  }

  function updateSummary(day){
    const dayState = ensureDayState(day.id);
    const doneCount = Object.values(dayState.setsDone).reduce((a,arr)=>a+(arr?.filter(Boolean).length||0),0);
    const totalSets = day.items.reduce((a,it)=>a+it.sets,0);
    const chips = el('#summary'); chips.children[1].innerHTML = `Sets done: <b>${doneCount}/${totalSets}</b>`;
    const pct = totalSets? Math.round(doneCount/totalSets*100):0; setHero(pct+"%", doneCount, totalSets);
  }

  // Notes persistence
  el('#rpe').addEventListener('change', ()=>{ const d=PLAN.days[currentIndex]; ensureDayState(d.id).rpe = Number(el('#rpe').value)||''; saveState(STATE) })
  el('#mood').addEventListener('change', ()=>{ const d=PLAN.days[currentIndex]; ensureDayState(d.id).mood = el('#mood').value; saveState(STATE) })
  el('#notes').addEventListener('change', ()=>{ const d=PLAN.days[currentIndex]; ensureDayState(d.id).notes = el('#notes').value; saveState(STATE) })

  // Reset / Export / Import
  el('#resetDayBtn').addEventListener('click', ()=>{ const d=PLAN.days[currentIndex]; STATE.days[d.id] = { setsDone:{}, loads:{}, results:{}, gif:{}, rpe:null, mood:'', notes:'' }; saveState(STATE); renderDay(d) })
  el('#exportBtn').addEventListener('click', ()=>{ const blob = new Blob([JSON.stringify(STATE,null,2)], {type:'application/json'}); const a = Object.assign(document.createElement('a'), { href:URL.createObjectURL(blob), download:'workout-progress.json' }); document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(a.href) })
  el('#importBtn').addEventListener('click', ()=>{ const inp = Object.assign(document.createElement('input'), {type:'file', accept:'application/json'}); inp.onchange = e=>{ const f=e.target.files[0]; if(!f) return; const r=new FileReader(); r.onload=()=>{ try{ STATE=JSON.parse(r.result); saveState(STATE); selectDay(currentIndex) }catch{ alert('Invalid JSON') } }; r.readAsText(f) }; inp.click(); })

  // Search
  const search = el('#search');
  function applyFilter(){ const q = search.value.trim().toLowerCase(); els('.exercise', el('#exerciseList')).forEach(ex=>{ const name = el('.ex-name', ex).textContent.toLowerCase(); ex.style.display = name.includes(q) ? '' : 'none'; }) }
  search.addEventListener('input', applyFilter);
  window.addEventListener('keydown', (e)=>{ if(e.key === '/') { e.preventDefault(); search.focus() } })

  // Start on Day 1 by default
  selectDay(0);
  </script>
</body>
</html>
 

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Workout Planner</title>
  <meta name="description" content="Interactive weekly workout planner with set tracking, videos/GIFs, and progress saved to your browser.">
  <style>
    :root{ --bg:#0b0d10;--panel:#13161b;--muted:#8a93a4;--text:#e9edf5;--pri:#6ea8fe;--acc:#7cf2c6;--warn:#ffb86b;--danger:#ff6b6b; --card:#171b22;--chip:#212734;--ring:rgba(110,168,254,.35);--shadow:0 10px 30px rgba(0,0,0,.45) }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:linear-gradient(180deg,#0b0d10, #0e1116 40%, #0b0d10);color:var(--text);font:15px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
    a{color:var(--pri);text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:980px;margin:0 auto;padding:20px}
    header{position:sticky;top:0;background:rgba(11,13,16,.8);backdrop-filter:saturate(140%) blur(10px);z-index:20;border-bottom:1px solid #1e232c}
    .head{display:flex;gap:14px;align-items:center;padding:12px 20px}
    .logo{display:flex;gap:10px;align-items:center}
    .logo i{width:36px;height:36px;border-radius:10px;background:radial-gradient(circle at 30% 30%,var(--pri),transparent 45%),radial-gradient(circle at 70% 70%,var(--acc),transparent 40%),linear-gradient(135deg,#1b2330,#0e141e);box-shadow:inset 0 0 0 1px #263042, var(--shadow)}
    h1{font-size:18px;margin:0}
    .tabs{display:flex;gap:8px;flex-wrap:wrap}
    .tab{border:1px solid #263042;background:#10141b;color:var(--text);padding:8px 12px;border-radius:12px;cursor:pointer}
    .tab.active{border-color:var(--pri);box-shadow:0 0 0 3px var(--ring)}
    main{display:grid;grid-template-columns:320px 1fr;gap:16px;align-items:start}
    @media (max-width:900px){main{grid-template-columns:1fr}}

    .card{background:var(--card);border:1px solid #202634;border-radius:16px;box-shadow:var(--shadow)}
    .card .hd{padding:14px 16px;border-bottom:1px solid #202634;display:flex;gap:8px;align-items:center;justify-content:space-between}
    .card .bd{padding:16px}
    .muted{color:var(--muted)}

    .list{display:flex;flex-direction:column;gap:10px}
    .exercise{background:linear-gradient(180deg,#141a22,#11161e);border:1px solid #222a36;border-radius:14px;padding:12px}
    .exercise h4{margin:0 0 6px;font-size:15px}
    .ex-meta{display:flex;gap:10px;flex-wrap:wrap}
    .chip{background:var(--chip);color:#d5dbea;border:1px solid #2a3240;border-radius:999px;padding:6px 10px;font-size:12px}

    .sets{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .set{min-width:42px;display:flex;align-items:center;justify-content:center;border:1px solid #2a3345;border-radius:10px;height:36px;padding:0 10px;cursor:pointer;user-select:none;background:#0f141c}
    .set.done{background:rgba(124,242,198,.12);border-color:#2d4a3e}
    .set.done::after{content:'✓';margin-left:6px;color:var(--acc)}

    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .row > *{flex:1}
    input[type="number"], input[type="text"], textarea{width:100%;background:#0d1117;border:1px solid #273142;border-radius:10px;color:var(--text);padding:10px}
    textarea{min-height:70px}

    button{background:linear-gradient(180deg,#1c2432,#141a24);border:1px solid #2a3446;color:#e7ecf8;padding:10px 12px;border-radius:12px;cursor:pointer}
    button:hover{filter:brightness(1.08)}
    .btn-ghost{background:transparent;border-color:#2a3345}
    .btn-pri{border-color:#35507c;background:linear-gradient(180deg,#20324d,#18263c)}

    .stack{display:flex;flex-direction:column;gap:12px}
    .grid{display:grid;gap:12px}
    .two{grid-template-columns:1fr 1fr}
    @media (max-width:680px){.two{grid-template-columns:1fr}}

    .demo{display:flex;gap:10px;align-items:center;margin-top:8px}
    .demo img{width:90px;height:68px;border-radius:10px;object-fit:cover;border:1px solid #273142}

    .footer{margin-top:20px;color:var(--muted);font-size:12px}
    .notice{padding:12px;border:1px dashed #2b364a;border-radius:12px;background:#0e141c;margin-top:10px}
    .kbd{padding:.2em .45em;border:1px solid #2a3446;border-bottom-width:2px;border-radius:6px;background:#0d1117}
  </style>
</head>
<body>
  <header>
    <div class="head wrap">
      <div class="logo"><i></i><h1>Workout Planner</h1></div>
      <div class="tabs" id="dayTabs" aria-label="Week Day Tabs"></div>
    </div>
  </header>

  <div class="wrap">
    <main>
      <section class="card" id="dayPanel" aria-live="polite">
        <div class="hd"><div class="row" style="justify-content:space-between;width:100%"><strong id="dayTitle">Day</strong>
          <div class="row" style="flex:0 0 auto">
            <button class="btn-ghost" id="resetDayBtn" title="Reset completed sets for this day">Reset Day</button>
            <button class="btn-pri" id="exportBtn" title="Export your progress as JSON">Export</button>
            <button class="btn-ghost" id="importBtn" title="Import progress JSON">Import</button>
          </div>
        </div></div>
        <div class="bd">
          <div id="summary" class="stack"></div>
          <h3>Warm‑Up</h3>
          <p id="warmup" class="muted"></p>

          <h3>Exercises</h3>
          <div id="exerciseList" class="list"></div>

          <div id="finisherWrap" style="margin-top:16px">
            <h3>Finisher</h3>
            <p id="finisher" class="muted"></p>
          </div>
        </div>
      </section>

      <aside class="card">
        <div class="hd"><strong>Notes & Tools</strong></div>
        <div class="bd stack">
          <div class="grid two">
            <div>
              <label class="muted">Target session RPE (effort 1–10)</label>
              <input type="number" id="rpe" min="1" max="10" step="1" />
            </div>
            <div>
              <label class="muted">Session mood</label>
              <input type="text" id="mood" placeholder="Focused, tired, great pump…" />
            </div>
          </div>
          <div>
            <label class="muted">General notes</label>
            <textarea id="notes" placeholder="Form cues, wins, next‑time tweaks…"></textarea>
          </div>
          <div class="notice">
            <b>Tip:</b> Click a set to mark it done. Built‑in guide + video for each exercise; paste a GIF or YouTube link to override. Progress auto‑saves (localStorage). Press <span class="kbd">/</span> to quick‑search moves. No timers.
          </div>
          <div id="searchWrap">
            <label class="muted">Quick search</label>
            <input id="search" type="text" placeholder="Type to filter exercises… ( / to focus )" />
          </div>
        </div>
      </aside>
    </main>

    <p class="footer">Built for GitHub Pages. Single file, no build tools. Copy this file into a repo and enable Pages. — v1.1</p>
  </div>

  <template id="exerciseTmpl">
    <div class="exercise" data-key="">
      <div class="row" style="justify-content:space-between">
        <h4 class="ex-name"></h4>
        <div class="ex-meta">
          <span class="chip ex-prescription"></span>
          <span class="chip ex-type"></span>
        </div>
      </div>
      <div class="demo">
        <img alt="Demo thumbnail" class="demo-thumb" />
        <div class="row" style="flex:1">
          <a class="btn-ghost ex-guide" target="_blank" rel="noopener">Open Guide</a>
          <a class="btn-pri ex-video" target="_blank" rel="noopener">Watch Video</a>
        </div>
      </div>
      <div class="sets"></div>
      <div class="grid two" style="margin-top:10px">
        <div>
          <label class="muted">Load (lbs per hand)</label>
          <input type="number" class="ex-load" min="0" step="1" placeholder="e.g., 25">
        </div>
        <div>
          <label class="muted">Your reps/time</label>
          <input type="text" class="ex-result" placeholder="e.g., 10/10/9 or :30/:28/:25">
        </div>
      </div>
      <div style="margin-top:10px" class="grid two">
        <div>
          <label class="muted">Custom GIF/Video URL (optional)</label>
          <input type="text" class="ex-gifurl" placeholder="Paste a GIF image URL or a YouTube link">
        </div>
      </div>
    </div>
  </template>

  <script>
  // ------ DATA ------
  const PLAN = {
    meta:{ updated:"2025-04-01", author:"You" },
    days:[
      {id:1, title:"Day 1 · Full‑Body Strength + Cardio",
       warmup:"5 min brisk walk or easy elliptical, then dynamic stretches (arm circles, hip swings, leg swings).",
       finisher:"5 min moderate cardio (incline walk or easy elliptical).",
       items:[
         {name:"Dumbbell Bench Press", sets:3, reps:"10", type:"strength"},
         {name:"Goblet Squat (Dumbbell Squat)", sets:3, reps:"10", type:"strength"},
         {name:"One‑Arm Dumbbell Row", sets:3, reps:"10 each arm", type:"strength"},
         {name:"Dumbbell Shoulder Press", sets:3, reps:"10", type:"strength"},
         {name:"Plank", sets:3, reps:"20–30 sec", type:"time"}
       ]},
      {id:2, title:"Day 2 · Cardio & Core (Active Recovery)",
       warmup:"3–5 min easy pace to get blood flowing.",
       finisher:"Optional: 5 min light cardio or full‑body stretch.",
       items:[
         {name:"Cardio (Treadmill/Elliptical)", sets:1, reps:"20 min", type:"time"},
         {name:"Bird‑Dog", sets:3, reps:"10/side", type:"core"},
         {name:"Dead Bug", sets:3, reps:"10/side", type:"core"},
         {name:"Glute Bridge", sets:3, reps:"15", type:"core"}
       ]},
      {id:3, title:"Day 3 · Upper Body (Back & Biceps)",
       warmup:"5 min cardio + arm circles, shoulder stretches.",
       finisher:"Elliptical intervals: 5 min (30s fast / 30s easy).",
       items:[
         {name:"Dumbbell Pullover", sets:3, reps:"10", type:"strength"},
         {name:"One‑Arm Dumbbell Row", sets:3, reps:"10 each arm", type:"strength"},
         {name:"Dumbbell Rear Delt Fly", sets:3, reps:"12", type:"strength"},
         {name:"Dumbbell Bicep Curl", sets:3, reps:"12", type:"strength"}
       ]},
      {id:4, title:"Day 4 · Lower Body & Core",
       warmup:"5 min brisk walk (or light jog) + leg swings, hip circles.",
       finisher:"Side plank 20s/side or standard plank; light stretching.",
       items:[
         {name:"Dumbbell Goblet Squat", sets:3, reps:"10", type:"strength"},
         {name:"Dumbbell Romanian Deadlift (RDL)", sets:3, reps:"10", type:"strength"},
         {name:"Optional: Dumbbell Reverse Lunge", sets:3, reps:"8 each leg", type:"strength"},
         {name:"Calf Raises", sets:3, reps:"15", type:"strength"},
         {name:"Russian Twist", sets:3, reps:"12 each side", type:"core"}
       ]},
      {id:5, title:"Day 5 · Full‑Body Conditioning Circuit",
       warmup:"5 min cardio + dynamic stretches.",
       finisher:"Cool down 5–10 min walk, then stretch all major groups.",
       items:[
         {name:"Incline Dumbbell Bench Press", sets:3, reps:"10", type:"circuit"},
         {name:"Dumbbell Step‑Up", sets:3, reps:"8 each leg", type:"circuit"},
         {name:"Dumbbell Thruster", sets:3, reps:"10", type:"circuit"},
         {name:"Dumbbell Woodchop", sets:3, reps:"10 each side", type:"circuit"}
       ]},
      {id:6, title:"Day 6 · Rest", warmup:"—", finisher:"Light stretch or walk.", items:[]},
      {id:7, title:"Day 7 · Active Recovery", warmup:"Light activity like walking or yoga.", finisher:"—", items:[]}
    ]
  };

  // Built-in demo links (guide + video) by exercise name
  const DEMOS = {
    "Dumbbell Bench Press": {guide:"https://musclewiki.com/exercise/dumbbell-bench-press", video:"https://www.youtube.com/watch?v=VmB1G1K7v94"},
    "Goblet Squat (Dumbbell Squat)": {guide:"https://musclewiki.com/exercise/dumbbell-goblet-squat", video:"https://www.youtube.com/watch?v=yGswPtbSlro"},
    "One‑Arm Dumbbell Row": {guide:"https://musclewiki.com/exercise/dumbbell-single-arm-row", video:"https://www.youtube.com/results?search_query=one+arm+dumbbell+row+proper+form"},
    "Dumbbell Shoulder Press": {guide:"https://musclewiki.com/exercise/dumbbell-overhead-press", video:"https://www.youtube.com/results?search_query=dumbbell+shoulder+press+proper+form"},
    "Plank": {guide:"https://commons.wikimedia.org/wiki/File:Plank_exercise.svg", video:"https://www.youtube.com/watch?v=pSHjTRCQxIw"},
    "Cardio (Treadmill/Elliptical)": {guide:"https://www.youtube.com/results?search_query=elliptical+workout+tips", video:"https://www.youtube.com/results?search_query=treadmill+incline+walk+workout"},
    "Bird‑Dog": {guide:"https://www.youtube.com/results?search_query=bird+dog+exercise+form", video:"https://www.youtube.com/watch?v=-LRjkbEy-qU"},
    "Dead Bug": {guide:"https://www.youtube.com/results?search_query=dead+bug+exercise+form", video:"https://www.youtube.com/results?search_query=dead+bug+exercise+proper+form"},
    "Glute Bridge": {guide:"https://www.youtube.com/results?search_query=glute+bridge+exercise+form", video:"https://www.youtube.com/results?search_query=glute+bridge+proper+form"},
    "Dumbbell Pullover": {guide:"https://www.youtube.com/results?search_query=dumbbell+pullover+proper+form", video:"https://www.youtube.com/results?search_query=dumbbell+pullover+how+to"},
    "Dumbbell Rear Delt Fly": {guide:"https://www.youtube.com/results?search_query=dumbbell+rear+delt+fly+proper+form", video:"https://www.youtube.com/results?search_query=rear+delt+fly+dumbbells+form"},
    "Dumbbell Bicep Curl": {guide:"https://www.youtube.com/results?search_query=dumbbell+bicep+curl+proper+form", video:"https://www.youtube.com/results?search_query=dumbbell+bicep+curl+how+to"},
    "Dumbbell Goblet Squat": {guide:"https://musclewiki.com/exercise/dumbbell-goblet-squat", video:"https://www.youtube.com/watch?v=yGswPtbSlro"},
    "Dumbbell Romanian Deadlift (RDL)": {guide:"https://www.youtube.com/results?search_query=dumbbell+romanian+deadlift+proper+form", video:"https://www.youtube.com/results?search_query=rdl+dumbbells+form"},
    "Optional: Dumbbell Reverse Lunge": {guide:"https://www.youtube.com/results?search_query=dumbbell+reverse+lunge+proper+form", video:"https://www.youtube.com/results?search_query=reverse+lunge+dumbbells+form"},
    "Calf Raises": {guide:"https://www.youtube.com/results?search_query=standing+calf+raise+dumbbells+form", video:"https://www.youtube.com/results?search_query=calf+raise+with+dumbbells+how+to"},
    "Russian Twist": {guide:"https://www.youtube.com/results?search_query=russian+twist+proper+form", video:"https://www.youtube.com/results?search_query=russian+twist+how+to"},
    "Incline Dumbbell Bench Press": {guide:"https://musclewiki.com/exercise/dumbbell-incline-bench-press", video:"https://www.youtube.com/results?search_query=dumbbell+incline+bench+press+proper+form"},
    "Dumbbell Step‑Up": {guide:"https://www.youtube.com/results?search_query=dumbbell+step+up+proper+form", video:"https://www.youtube.com/results?search_query=dumbbell+step+up+how+to"},
    "Dumbbell Thruster": {guide:"https://www.youtube.com/results?search_query=dumbbell+thruster+proper+form", video:"https://www.youtube.com/results?search_query=dumbbell+thruster+how+to"},
    "Dumbbell Woodchop": {guide:"https://www.youtube.com/results?search_query=dumbbell+woodchop+proper+form", video:"https://www.youtube.com/results?search_query=dumbbell+woodchop+how+to"}
  };

  // ------ STORAGE ------
  const KEY = 'workout-progress-v1-1';
  const loadState = ()=>{ try{ return JSON.parse(localStorage.getItem(KEY)) || { days:{} } } catch{ return {days:{}} } };
  const saveState = (s)=>{ localStorage.setItem(KEY, JSON.stringify(s)) };
  let STATE = loadState();

  // ------ UTIL ------
  const el = (sel, root=document)=>root.querySelector(sel);
  const els = (sel, root=document)=>[...root.querySelectorAll(sel)];

  // ------ UI INIT ------
  const tabs = el('#dayTabs');
  PLAN.days.forEach((d, i)=>{
    const b = document.createElement('button');
    b.className='tab'; b.textContent = `Day ${d.id}`; b.title=d.title; b.addEventListener('click',()=>selectDay(i));
    tabs.appendChild(b);
  });

  let currentIndex = 0;
  function selectDay(i){ currentIndex = i; els('.tab', tabs).forEach((t,idx)=>t.classList.toggle('active', idx===i)); renderDay(PLAN.days[i]); }
  function ensureDayState(dayId){ STATE.days[dayId] = STATE.days[dayId] || { setsDone:{}, loads:{}, results:{}, gif:{}, rpe:null, mood:'', notes:'' }; return STATE.days[dayId] }

  function renderDay(day){
    const dayState = ensureDayState(day.id);
    el('#dayTitle').textContent = day.title;
    el('#warmup').textContent = day.warmup;
    el('#finisher').textContent = day.finisher;

    // Summary
    const sum = el('#summary'); sum.innerHTML = '';
    sum.insertAdjacentHTML('beforeend', `<div class="chip">Exercises: <b>${day.items.length}</b></div>`);
    const doneCount = Object.values(dayState.setsDone).reduce((a,arr)=>a+(arr?.filter(Boolean).length||0),0);
    const totalSets = day.items.reduce((a,it)=>a+it.sets,0);
    sum.insertAdjacentHTML('beforeend', `<div class="chip">Sets done: <b>${doneCount}/${totalSets}</b></div>`);

    el('#rpe').value = dayState.rpe ?? '';
    el('#mood').value = dayState.mood ?? '';
    el('#notes').value = dayState.notes ?? '';

    const list = el('#exerciseList'); list.innerHTML = '';
    day.items.forEach((it, idx)=>{
      const tpl = el('#exerciseTmpl').content.cloneNode(true);
      const card = tpl.querySelector('.exercise'); card.dataset.key = idx;
      tpl.querySelector('.ex-name').textContent = it.name;
      tpl.querySelector('.ex-prescription').textContent = `${it.sets} × ${it.reps}`;
      tpl.querySelector('.ex-type').textContent = it.type;

      // sets
      const setsWrap = tpl.querySelector('.sets');
      const st = dayState.setsDone[idx] = dayState.setsDone[idx] || Array(it.sets).fill(false);
      for(let s=0; s<it.sets; s++){
        const b = document.createElement('button'); b.className = 'set' + (st[s] ? ' done' : ''); b.textContent = `Set ${s+1}`;
        b.addEventListener('click',()=>{ st[s] = !st[s]; b.classList.toggle('done', st[s]); saveState(STATE); updateSummary(day) });
        setsWrap.appendChild(b)
      }

      // Load & Result
      const loadInput = tpl.querySelector('.ex-load'); loadInput.value = dayState.loads[idx] ?? '';
      loadInput.addEventListener('change', ()=>{ dayState.loads[idx] = Number(loadInput.value)||''; saveState(STATE) })
      const resInput = tpl.querySelector('.ex-result'); resInput.value = dayState.results[idx] ?? '';
      resInput.addEventListener('change', ()=>{ dayState.results[idx] = resInput.value; saveState(STATE) })

      // Demo links / thumbnails
      const guideA = tpl.querySelector('.ex-guide');
      const videoA = tpl.querySelector('.ex-video');
      const thumb = tpl.querySelector('.demo-thumb');

      const custom = dayState.gif[idx] ?? '';
      const d = DEMOS[it.name] || {};

      function applyDemo(url){
        const yt = (u)=>{ try{ const url=new URL(u); if(url.hostname==='youtu.be') return url.pathname.slice(1); return url.searchParams.get('v') }catch{ return '' } };
        if(url){
          if(/youtube\.com|youtu\.be/.test(url)){
            const id = yt(url); if(id){ thumb.src=`https://i.ytimg.com/vi/${id}/hqdefault.jpg`; } videoA.href=url; guideA.href=d.guide||url; return }
          thumb.src=url; guideA.href=url; videoA.href=d.video||'#'; return;
        }
        // fallback
        guideA.href = d.guide || '#';
        videoA.href = d.video || '#';
        if(d.video){ const id = yt(d.video); if(id){ thumb.src=`https://i.ytimg.com/vi/${id}/hqdefault.jpg`; } }
      }
      applyDemo(custom);

      const gifInput = tpl.querySelector('.ex-gifurl');
      gifInput.value = custom;
      gifInput.addEventListener('change', ()=>{ dayState.gif[idx] = gifInput.value; applyDemo(gifInput.value); saveState(STATE) })

      list.appendChild(tpl)
    })

    updateSummary(day)
  }

  function updateSummary(day){
    const dayState = ensureDayState(day.id);
    const doneCount = Object.values(dayState.setsDone).reduce((a,arr)=>a+(arr?.filter(Boolean).length||0),0);
    const totalSets = day.items.reduce((a,it)=>a+it.sets,0);
    const chips = el('#summary'); chips.children[1].innerHTML = `Sets done: <b>${doneCount}/${totalSets}</b>`;
  }

  // Notes persistence
  el('#rpe').addEventListener('change', ()=>{ const d=PLAN.days[currentIndex]; ensureDayState(d.id).rpe = Number(el('#rpe').value)||''; saveState(STATE) })
  el('#mood').addEventListener('change', ()=>{ const d=PLAN.days[currentIndex]; ensureDayState(d.id).mood = el('#mood').value; saveState(STATE) })
  el('#notes').addEventListener('change', ()=>{ const d=PLAN.days[currentIndex]; ensureDayState(d.id).notes = el('#notes').value; saveState(STATE) })

  // Reset / Export / Import
  el('#resetDayBtn').addEventListener('click', ()=>{ const d=PLAN.days[currentIndex]; STATE.days[d.id] = { setsDone:{}, loads:{}, results:{}, gif:{}, rpe:null, mood:'', notes:'' }; saveState(STATE); renderDay(d) })
  el('#exportBtn').addEventListener('click', ()=>{ const blob = new Blob([JSON.stringify(STATE,null,2)], {type:'application/json'}); const a = Object.assign(document.createElement('a'), { href:URL.createObjectURL(blob), download:'workout-progress.json' }); document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(a.href) })
  el('#importBtn').addEventListener('click', ()=>{ const inp = Object.assign(document.createElement('input'), {type:'file', accept:'application/json'}); inp.onchange = e=>{ const f=e.target.files[0]; if(!f) return; const r=new FileReader(); r.onload=()=>{ try{ STATE=JSON.parse(r.result); saveState(STATE); selectDay(currentIndex) }catch{ alert('Invalid JSON') } }; r.readAsText(f) }; inp.click(); })

  // Search
  const search = el('#search');
  function applyFilter(){ const q = search.value.trim().toLowerCase(); els('.exercise', el('#exerciseList')).forEach(ex=>{ const name = el('.ex-name', ex).textContent.toLowerCase(); ex.style.display = name.includes(q) ? '' : 'none'; }) }
  search.addEventListener('input', applyFilter);
  window.addEventListener('keydown', (e)=>{ if(e.key === '/') { e.preventDefault(); search.focus() } })

  // Start on Day 1 by default
  selectDay(0);
  </script>
</body>
</html>
